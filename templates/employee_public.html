{% extends "public_base.html" %}
{% block title %}{{ employee.first_name }} {{ employee.last_name }}{% endblock %}

{% block content %}
<style>
  body {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    font-family: 'Poppins', sans-serif;
    position: relative;
    overflow-x: hidden;
  }

  body::before {
    content: '';
    position: fixed;
    top: 0;
    left: 0;
    right: 0;
    bottom: 0;
    background:
      radial-gradient(circle at 20% 50%, rgba(120, 119, 198, 0.3), transparent 50%),
      radial-gradient(circle at 80% 80%, rgba(255, 103, 145, 0.3), transparent 50%);
    pointer-events: none;
  }

  .employee-card {
    background: rgba(255, 255, 255, 0.95);
    backdrop-filter: blur(10px);
    border-radius: 28px;
    box-shadow: 0 20px 60px rgba(0, 0, 0, 0.25);
    max-width: 440px;
    width: 100%;
    overflow: hidden;
    transition: all 0.4s cubic-bezier(0.175, 0.885, 0.32, 1.275);
    position: relative;
  }

  .employee-card:hover {
    transform: translateY(-8px) scale(1.02);
    box-shadow: 0 30px 70px rgba(0, 0, 0, 0.3);
  }

  .card-header {
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
    padding: 3rem 1.5rem 5rem;
    position: relative;
    overflow: hidden;
  }

  .card-header::before {
    content: '';
    position: absolute;
    top: -50%;
    right: -20%;
    width: 200px;
    height: 200px;
    background: rgba(255, 255, 255, 0.1);
    border-radius: 50%;
    animation: float 6s ease-in-out infinite;
  }

  @keyframes float {

    0%,
    100% {
      transform: translateY(0) rotate(0deg);
    }

    50% {
      transform: translateY(-20px) rotate(180deg);
    }
  }

  .card-header h4 {
    text-transform: capitalize;
    font-weight: 700;
    letter-spacing: 0.5px;
    font-size: 1.5rem;
    margin: 0;
    position: relative;
    z-index: 1;
  }

  .card-header p {
    font-size: 1rem;
    opacity: 0.95;
    margin: 0.5rem 0 0;
    font-weight: 500;
    position: relative;
    z-index: 1;
  }

  .profile-img {
    width: 150px;
    height: 150px;
    border-radius: 50%;
    object-fit: cover;
    margin-top: -75px;
    border: 6px solid white;
    box-shadow: 0 10px 40px rgba(102, 126, 234, 0.4);
    transition: all 0.4s ease;
    position: relative;
    z-index: 2;
  }

  .profile-img:hover {
    transform: scale(1.08) rotate(5deg);
    box-shadow: 0 15px 50px rgba(102, 126, 234, 0.6);
  }

  .profile-placeholder {
    width: 150px;
    height: 150px;
    margin-top: -75px;
    border: 6px solid white;
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    box-shadow: 0 10px 40px rgba(102, 126, 234, 0.4);
    transition: all 0.4s ease;
  }

  .profile-placeholder:hover {
    transform: scale(1.08);
  }

  .profile-placeholder span {
    font-size: 2.5rem;
    color: white;
  }

  .info-section {
    padding: 2rem 2rem 1.5rem;
  }

  .info-item {
    display: flex;
    align-items: center;
    justify-content: center;
    background: linear-gradient(135deg, #f5f7fa 0%, #c3cfe2 100%);
    padding: 0.9rem 1.2rem;
    border-radius: 15px;
    margin-bottom: 0.8rem;
    transition: all 0.3s ease;
    font-size: 0.95rem;
  }

  .info-item:hover {
    transform: translateX(5px);
    background: linear-gradient(135deg, #667eea 0%, #764ba2 100%);
    color: white;
  }

  .info-item i {
    font-size: 1.2rem;
    margin-right: 10px;
    min-width: 24px;
    background: linear-gradient(135deg, #667eea, #764ba2);
    -webkit-background-clip: text;
    -webkit-text-fill-color: transparent;
    background-clip: text;
    transition: all 0.3s ease;
  }

  .info-item:hover i {
    -webkit-text-fill-color: white;
  }

  .skills-section {
    background: linear-gradient(135deg, #f8f9fd 0%, #e9ecf5 100%);
    border-top: 2px solid #e0e4f0;
    padding: 1.5rem 2rem 2rem;
  }

  .skills-section h6 {
    color: #667eea;
    font-weight: 700;
    font-size: 1.1rem;
    margin-bottom: 1.2rem;
    text-transform: uppercase;
    letter-spacing: 1px;
  }

  .skills-section ul {
    padding: 0;
    list-style: none;
    margin: 0;
  }

  .skill-item {
    background: white;
    border: 2px solid transparent;
    padding: 0.9rem 1.2rem;
    border-radius: 12px;
    margin-bottom: 0.8rem;
    font-size: 0.95rem;
    display: flex;
    justify-content: space-between;
    align-items: center;
    transition: all 0.3s ease;
    box-shadow: 0 4px 12px rgba(0, 0, 0, 0.05);
  }

  .skill-item:hover {
    transform: translateX(8px);
    border-color: #667eea;
    box-shadow: 0 6px 20px rgba(102, 126, 234, 0.2);
  }

  .skill-name {
    font-weight: 500;
    color: #2d3748;
  }

  .skill-level {
    background: linear-gradient(135deg, #667eea, #764ba2);
    color: white;
    padding: 0.3rem 0.9rem;
    border-radius: 20px;
    font-size: 0.85rem;
    font-weight: 600;
    text-transform: uppercase;
    letter-spacing: 0.5px;
  }

  .no-skills {
    color: #a0aec0;
    font-size: 0.95rem;
    font-style: italic;
    text-align: center;
    padding: 1rem;
  }

  @media (max-width: 576px) {
    .employee-card {
      margin: 1rem;
    }

    .profile-img,
    .profile-placeholder {
      width: 130px;
      height: 130px;
      margin-top: -65px;
    }
  }
</style>


<div class="d-flex justify-content-center align-items-center" style="min-height: 90vh; padding: 2rem 1rem;">
  <div class="employee-card text-center">

    <div class="card-header">
      <h4>{{ employee.first_name }} {{ employee.last_name }}</h4>
      {% if employee.position %}
      <p>{{ employee.position }}</p>
      {% endif %}
    </div>

    <div class="card-body">
      {% if employee.photo_path %}
      <img src="{{employee.photo_path }}" alt="Photo" class="profile-img">
      {% else %}
      <div class="rounded-circle d-inline-flex align-items-center justify-content-center profile-placeholder">
        <span class="fw-bold">{{ employee.first_name[0] }}{{ employee.last_name[0] }}</span>
      </div>
      {% endif %}

      <div class="info-section">
        {% if employee.department %}
        <div class="info-item"><i class="bi bi-building"></i><span>{{ employee.department }}</span></div>
        {% endif %}
        {% if employee.hire_date %}
        <div class="info-item"><i class="bi bi-calendar-check"></i><span>{{ employee.hire_date.strftime("%d/%m/%Y")
            }}</span></div>
        {% endif %}
      </div>
    </div>

    <div class="skills-section">
      {% if employee.skills %}
      <h6>{{ _("Skills") }}</h6>
      <ul>
        {% set LEVEL_DESCR = {
        'E': _('In training'),
        'A': _('Knows documentation'),
        'B': _('Simple adjustments'),
        'C': _('Can train others'),
        'D': _('Manage line')
        } %}
        {% for es in employee.skills %}
        <li class="skill-item">
          <div>
            <span class="skill-name">{{ es.skill.skill_name }}</span><br>
            {% if es.skill.category %}
            <span class="skill-category text-muted" style="font-size: 0.85rem;">
              <i class="bi bi-tags"></i> {{ _("Line") }}: {{ es.skill.category }}
            </span><br>
            {% endif %}
            {% if es.last_assessed %}
            <span class="skill-date"><i class="bi bi-calendar-date"></i> {{ _("Obtained on") }} {{
              es.last_assessed.strftime("%d/%m/%Y") }}</span>
            {% endif %}
          </div>
          {% set lvl = (es.level|string|trim|upper) %}
          <div class="text-end">
            <span class="skill-level">{{ lvl }}</span><br>
            <small class="text-muted" style="font-size: 0.8rem;">{{ LEVEL_DESCR.get(lvl, '-') }}</small>
          </div>
        </li>
        {% endfor %}
      </ul>
      {% else %}
      <p class="no-skills">{{ _("No skills assigned.") }}</p>
      {% endif %}
    </div>

  </div>
</div>
{% endblock %}